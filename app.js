(function(){const t=document.querySelector('.nav-toggle'),l=document.getElementById('navLinks');if(t&&l){t.addEventListener('click',()=>{const e=t.getAttribute('aria-expanded')==='true';t.setAttribute('aria-expanded',String(!e));l.classList.toggle('show')})}const bar=document.getElementById('cookieBar');if(bar){try{if(!localStorage.getItem('cookieChoice')){bar.hidden=false}}catch(e){bar.hidden=false}const hide=choice=>{try{localStorage.setItem('cookieChoice',choice)}catch(e){};bar.classList.add('is-hidden');bar.hidden=true;setTimeout(()=>{bar.parentNode&&bar.parentNode.removeChild(bar)},300)};const acc=document.getElementById('cookieAccept');const ess=document.getElementById('cookieEssential');if(acc) acc.onclick=()=>hide('all');if(ess) ess.onclick=()=>hide('essential')}function renderCard(i){const a=document.createElement('a');a.className='card';a.href=i.link;a.target='_blank';a.rel='noopener';const w=document.createElement('div');w.className='card-image';const img=document.createElement('img');img.alt=i.source?('Image from '+i.source):'News image';img.src='assets/fallback.jpg';img.loading='lazy';if(i.image){const t=new Image();t.onload=()=>img.src=i.image;t.src=i.image}w.appendChild(img);a.appendChild(w);const b=document.createElement('div');b.className='card-body';const h=document.createElement('h3');h.textContent=i.title||'Untitled';const s=document.createElement('span');s.className='source';s.textContent=i.source||'';b.appendChild(h);b.appendChild(s);a.appendChild(b);return a}function loadHome(){document.querySelectorAll('.home-section').forEach(sec=>{const file=sec.getAttribute('data-json');const grid=sec.querySelector('.card-grid');fetch('data/'+file).then(r=>r.json()).then(items=>{(items||[]).slice(0,10).forEach(it=>grid.appendChild(renderCard(it)))})})}if(document.querySelector('.home')) loadHome();})();